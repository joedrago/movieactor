# Claude Instructions

This repository contains tools for exploring and playing games with the IMDB dataset.

## Overview

The repo downloads IMDB's public dataset files and imports them into a local SQLite database (`imdb.db`) optimized for searching by movie name or actor name.

## Before Writing Scripts or Tools

**Read `IMDB.md` first.** It contains:
- Database schema and table definitions
- Column name mappings (TSV to SQLite)
- Index documentation
- FTS5 fuzzy search table documentation
- Example queries for common operations

## Key Files

- `data/imdb.db` - SQLite database with all IMDB data (generated by `npm run gendb`)
- `IMDB.md` - Complete documentation of the database schema and query patterns
- `scripts/rebuild_imdb.js` - Script to download and rebuild the database

## Common Operations

**Search for actors:** Use `name_basics` table or `name_basics_fts` for fuzzy search
**Search for movies:** Use `title_basics` table or `title_basics_fts` for fuzzy search
**Find actor's movies:** Join `name_basics` → `title_principals` → `title_basics`
**Find movie's cast:** Join `title_basics` → `title_principals` → `name_basics`

## npm Scripts

- `npm run gendb` - Download IMDB data and build/rebuild the database
- `npm run format` - Format JS files with Prettier
- `npm run lint` - Lint JS files with ESLint

## Code Style

Always run `npm run format` and `npm run lint` after modifying JS files.
